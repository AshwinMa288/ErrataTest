---
title: "[MS-WINERRATA]: File System Control Codes"
description: "This topic lists the Errata found in the MS-FSCC    document since it was last published. Since this topic is updated    frequently, we recommend"
---

# [MS-FSCC]: File System Control Codes

<p align="right"><a href="https://msdn.microsoft.com/en-us/library/47d52c31-2fa8-4992-91eb-7617117a2214">msdn link</a></p>
<p> </p>

<table>
 <thead>
  <tr>
   <th>
   <p>This topic lists the Errata found in the MS-FSCC
   document since it was last published. Since this topic is updated
   frequently, we recommend that you subscribe to these RSS or Atom feeds to
   receive update notifications.</p>
   <p>Errata are subject to the same terms as the
   Open Specifications documentation referenced.</p>
   </th>
   <th>
   <p><img id="Picture 149" src="MS-WINERRATA_files/image001.png"><span><a href="http://blogs.msdn.com/b/protocol_content_errata/rss.aspx">RSS</a></span>
   </p>
   <p><img id="Picture 148" src="MS-WINERRATA_files/image001.png"><span><a href="http://blogs.msdn.com/b/protocol_content_errata/atom.aspx">Atom</a></span>
   </p>
   <p> </p>
   </th>
  </tr>
 </thead>
</table>

<p>To view a PDF file of the errata for the previous versions
of this document, see the following ERRATA Archives:</p>

<p>October 16, 2015 - <span><a href="http://go.microsoft.com/fwlink/?LinkID=690377">Download</a></span></p>

<p>June 30, 2015 - <span><a href="http://go.microsoft.com/fwlink/?LinkId=617579">Download</a></span></p>

<p>July 18, 2016 - <span><a href="http://go.microsoft.com/fwlink/?LinkId=822549">Download</a></span></p>

<p>June 1, 2017 - <span><a href="https://winprotocoldoc.blob.core.windows.net/productionwindowsarchives/MS-WINERRATA/%5bMS-WINERRATA%5d-170601.pdf">Download</a></span></p>

<p>September 15, 2017 - <span><a href="https://winprotocoldoc.blob.core.windows.net/productionwindowsarchives/MS-WINERRATA/%5bMS-WINERRATA%5d-170915.pdf">Download</a>
</span></p>

<p>December 1, 2017 - <span><a href="https://winprotocoldoc.blob.core.windows.net/productionwindowsarchives/MS-WINERRATA/%5bMS-WINERRATA%5d-171201.pdf">Download</a></span>
</p>

<p>September 12, 2018 - <span><a href="https://winprotocoldoc.blob.core.windows.net/productionwindowsarchives/MS-WINERRATA/%5bMS-WINERRATA%5d-180912.pdf">Download</a></span></p>

<p>Errata below are for Protocol Document Version <span><a href="https://msdn.microsoft.com/en-us/library/cc231987.aspx">V45.0 –
2018/09/12</a></span>.</p>

<table><thead>
  <tr>
   <th>
   <p>Errata Published*</p>
   </th>
   <th>
   <p>Description</p>
   </th>
  </tr>
 </thead><tbody><tr>
  <td>
  <p>2019/08/05</p>
  </td>
  <td>
  <p>In Section 2.3.42, FSCTL_QUERY_FILE_REGIONS Reply, the
  length of the Region field has been changed from 24 bytes to variable.</p>
  </td>
 </tr><tr>
  <td>
  <p>2019/08/05</p>
  </td>
  <td>
  <p>In Section 2.3.41, FSCTL_QUERY_FILE_REGIONS Request, a
  new Reserved field has been added to the end of the data element.</p>
  <p> </p>
  <p>Added:</p>
  <p> </p>
  <p>Reserved (4 bytes): A 32-bit unsigned integer that is
  reserved. This field SHOULD be 0x00000000 and MUST be ignored.</p>
  </td>
 </tr><tr>
  <td>
  <p>2019/08/05</p>
  </td>
  <td>
  <p>In Section 2.3.41, FSCTL_QUERY_FILE_REGIONS Request,
  new product behavior notes have been added to
  FILE_REGION_USAGE_VALID_CACHED_DATA and
  FILE_REGION_USAGE_VALID_NONCACHED_DATA.</p>
  <p> </p>
  <p>Added:</p>
  <p> </p>
  <p>&lt;30&gt; Section 2.3.41:  This region usage flag can
  only be specified for volumes using the NTFS file system.</p>
  <p>&lt;31&gt; Section 2.3.41:  This region usage flag can
  only be specified for volumes using the ReFS file system.</p>
  <p> </p>
  <p>In Section 2.3.42.1, FILE_REGION_INFO, the
  DesiredUsage field has been changed from:</p>
  <p> </p>
  <p>DesiredUsage (4 bytes): A 32-bit unsigned integer that
  indicates the usage for the given region of the file. The valid values are
  defined in section 2.3.41.</p>
  <p> </p>
  <p>Changed to:</p>
  <p> </p>
  <p>DesiredUsage (4 bytes): A 32-bit unsigned integer that
  indicates the usage for the given region of the file.</p>
  <table><thead>
    <tr>
     <th>
     <p>Value </p>
     </th>
     <th>
     <p>Meaning</p>
     </th>
    </tr>
   </thead><tbody><tr>
    <td>
    <p>0x00000000 </p>
    </td>
    <td>
    <p>The given range is invalid. It does not match the
    criteria of the requested DesiredUsage as specified in section 2.3.41.</p>
    </td>
   </tr><tr>
    <td>
    <p>FILE _USAGE_VALID_CACHED_DATA 0x00000001 </p>
    </td>
    <td>
    <p>Defines those regions of the file that exists before
    VDL as it exists in the cache manager.&lt;32&gt;</p>
    </td>
   </tr><tr>
    <td>
    <p>FILE _USAGE_VALID_NONCACHED_DATA 0x00000002 </p>
    </td>
    <td>
    <p>Defines those regions of the files that exist before
    VDL on the storage device.&lt;33&gt;</p>
    </td>
   </tr></tbody></table>
  <p> </p>
  <p> </p>
  <p>&lt;32&gt; Section 2.3.42.1:  The NTFS file system is
  the only file system that returns this region usage value.</p>
  <p>&lt;33&gt; Section 2.3.42.1:  The ReFS file system is
  the only file system that returns this region usage value.</p>
  </td>
 </tr><tr>
  <td>
  <p>2018/12/10</p>
  </td>
  <td>
  <p>In Section 2.1.5, Pathname, the following has been
  removed:</p>
  <p> </p>
  <p>&#9679;    Each pathname component MUST be no more
  than 255 characters in length. </p>
  <p> </p>
  <p>In Section 2.1.5.2, Filename, the following has been
  added:</p>
  <p> </p>
  <p>&#9679;    A filename MUST be at least one character
  but no more than 255 characters in length. </p>
  <p> </p>
  <p>In Section 2.1.5.3, Streamname, the following has been
  added:</p>
  <p> </p>
  <p>&#9679;    A streamname MUST be no more than 255
  characters in length.</p>
  </td>
 </tr><tr>
  <td>
  <p>2018/12/10</p>
  </td>
  <td>
  <p>In Section 2.3.9.2, SMB2_DUPLICATE_EXTENTS_DATA_EX, a
  new field called Reserved has been added to the packet diagram and the field
  descriptions. </p>
  <p> </p>
  <p>Added:</p>
  <p> </p>
  <p>Reserved (4 bytes): This field SHOULD be set to zero
  and MUST be ignored.</p>
  </td>
 </tr><tr>
  <td>
  <p>2018/11/12</p>
  </td>
  <td>
  <p>In the sections listed below, the description of the
  EaSize field has been changed.</p>
  <p> </p>
  <p>Section 2.4.8, FileBothDirectoryInformation</p>
  <p>Section 2.4.14, FileFullDirectoryInformation</p>
  <p>Section 2.4.17, FileIdBothDirectoryInformation</p>
  <p>Section 2.4.18, FileIdFullDirectoryInformation</p>
  <p> </p>
  <p>Changed from:</p>
  <p> </p>
  <p>EaSize (4 bytes): A 32 -bit unsigned integer that
  contains the combined length, in bytes, of the extended attributes (EA) for
  the file.</p>
  <p> </p>
  <p>Changed to:</p>
  <p> </p>
  <p>EaSize (4 bytes): If FILE_ATTRIBUTE_REPARSE_POINT is
  set in the FileAttributes field, this field MUST contain a reparse tag as
  specified in section 2.1.2.1. Otherwise, this field is a 32 -bit unsigned
  integer that contains the combined length, in bytes, of the extended
  attributes (EA) for the file.,</p>
  </td>
 </tr><tr>
  <td>
  <p>2018/11/12</p>
  </td>
  <td>
  <p>In Section 2.4, File Information Classes, the
  following has been added:</p>
  <p> </p>
  <table><thead>
    <tr>
     <th>
     <p>File information class</p>
     </th>
     <th>
     <p>Level</p>
     </th>
     <th>
     <p>Uses</p>
     </th>
    </tr>
   </thead><tbody><tr>
    <td>
    <p>…</p>
    </td>
    <td>
    <p>…</p>
    </td>
    <td>
    <p>…</p>
    </td>
   </tr><tr>
    <td>
    <p>FileIdInformation</p>
    </td>
    <td>
    <p>59</p>
    </td>
    <td>
    <p>Query&lt;78&gt;</p>
    </td>
   </tr><tr>
    <td>
    <p>…</p>
    </td>
    <td>
    <p>…</p>
    </td>
    <td>
    <p>… </p>
    </td>
   </tr></tbody></table>
  <p> </p>
  <p>&lt;78&gt; Section 2.4:  The FileIdInformation information
  class is supported in the NTFS and ReFS file systems in Windows 8 and
  subsequent and Windows Server 2012 and subsequent.</p>
  <p> </p>
  <p>The following new section has been added:</p>
  <p> </p>
  <p>Section 2.4.43    FileIdInformation</p>
  <p>This information class is used to query the volume
  serial number and fileid information for a file.</p>
  <p>A FILE_ID_INFORMATION data element, defined as
  follows, is provided by the server.</p>
  <p><img id="Picture 301" src="MS-WINERRATA_files/image004.png"></p>
  <p>VolumeSerialNumber (8 bytes): A 64-bit unsigned
  integer that contains the serial number of the volume where the file is
  located.</p>
  <p>FileId (16 bytes): An opaque 128-bit signed integer
  that is an identifier of the file. For file systems that support file
  identifiers that are less than 128 bits, the unsupported portions of this
  value MUST be set to zero.&lt;121&gt;</p>
  <p>This operation returns a status code as specified in
  section 2.2. Upon success, the status code returned by the function that
  processes this file information class is STATUS_SUCCESS. The most common
  error codes are listed in the following table.</p>
  <table><thead>
    <tr>
     <th>
     <p>Error Code</p>
     </th>
     <th>
     <p>Meaning</p>
     </th>
    </tr>
   </thead><tbody><tr>
    <td>
    <p>STATUS_INFO_LENGTH_MISMATCH 0xC0000004</p>
    </td>
    <td>
    <p>The specified information record length does not
    match the length that is required for the specified information class. </p>
    </td>
   </tr></tbody></table>
  <p>
  </td>
 </tr></tbody></table>

<p>*Date format: YYYY/MM/DD</p>


                